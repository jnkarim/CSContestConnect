@{
    Layout = "_Layout";
    ViewData["Title"] = "Events";

    var q = Context?.Request?.Query["q"].ToString() ?? "";
    var type = Context?.Request?.Query["type"].ToString() ?? "";
    var status = Context?.Request?.Query["status"].ToString() ?? "";
    var sort = Context?.Request?.Query["sort"].ToString() ?? "soonest";
}

<link rel="stylesheet" href="~/css/events.css" asp-append-version="true" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />

<a href="#results" class="skip-link">Skip to results</a>

<header class="events-hero">
    <div class="container">
        <div class="hero-copy">
            <h1 class="title">CSContestConnect Events</h1>
            <p class="subtitle">Your ultimate hub for hackathons and programming contests. Discover local events and global competitions in one place.</p>
        </div>

        <form method="get" class="filters" role="search" aria-label="Search and filter events">
            <div class="input-group">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="20" height="20"><circle cx="11" cy="11" r="7" stroke-width="1.5"/><path d="M20 20l-3.5-3.5" stroke-width="1.5"/></svg>
                </span>
                <input type="search" name="q" placeholder="Search events (title, tags, organizer)…" value="@q" aria-label="Search events" />
            </div>

            <label class="select">
                <span class="select-label">Type</span>
                <select name="type" aria-label="Filter by event type">
                    @if (string.IsNullOrWhiteSpace(type)) {
                        <option value="" selected>All types</option>
                    } else {
                        <option value="">All types</option>
                    }

                    @if (type == "hackathon") {
                        <option value="hackathon" selected>Hackathon</option>
                    } else {
                        <option value="hackathon">Hackathon</option>
                    }

                    @if (type == "contest") {
                        <option value="contest" selected>Programming Contest</option>
                    } else {
                        <option value="contest">Programming Contest</option>
                    }
                </select>
            </label>

            <label class="select">
                <span class="select-label">Status</span>
                <select name="status" aria-label="Filter by registration status">
                    @if (string.IsNullOrWhiteSpace(status)) {
                        <option value="" selected>Any</option>
                    } else {
                        <option value="">Any</option>
                    }

                    @if (status == "open") {
                        <option value="open" selected>Open</option>
                    } else {
                        <option value="open">Open</option>
                    }

                    @if (status == "closed") {
                        <option value="closed" selected>Closed</option>
                    } else {
                        <option value="closed">Closed</option>
                    }
                </select>
            </label>

            <label class="select">
                <span class="select-label">Sort</span>
                <select name="sort" aria-label="Sort order">
                    @if (string.IsNullOrWhiteSpace(sort) || sort == "soonest") {
                        <option value="soonest" selected>Soonest</option>
                    } else {
                        <option value="soonest">Soonest</option>
                    }

                    @if (sort == "newest") {
                        <option value="newest" selected>Newest</option>
                    } else {
                        <option value="newest">Newest</option>
                    }

                    @if (sort == "popular") {
                        <option value="popular" selected>Most Popular</option>
                    } else {
                        <option value="popular">Most Popular</option>
                    }
                </select>
            </label>

            <button class="btn-primary" type="submit">Apply Filters</button>
        </form>
    </div>
</header>

<main id="results" class="container events-section">
    <!-- Featured Events Carousel -->
    <section class="featured-section">
        <div class="section-header">
            <h2 class="section-title">🔥 Featured Events</h2>
            <p class="section-subtitle">Don't miss these highlighted competitions</p>
        </div>

        <div class="swiper featured-swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="featured-card">
                        <div class="featured-image" style="background-image: url('https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?w=600&h=300&fit=crop')"></div>
                        <div class="featured-content">
                            <div class="featured-meta">
                                <span class="pill pill-featured">Featured</span>
                                <span class="pill">Hackathon</span>
                            </div>
                            <h3 class="featured-title">AI Revolution Hackathon 2025</h3>
                            <p class="featured-desc">48-hour global hackathon focused on AI innovation and machine learning solutions.</p>
                            <div class="featured-details">
                                <span class="detail-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" stroke-width="1.5"/></svg>
                                    March 15-17, 2025
                                </span>
                                <span class="detail-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" stroke-width="1.5"/></svg>
                                    Global • Online
                                </span>
                            </div>
                            <a href="#" class="btn-primary">Register Now</a>
                        </div>
                    </div>
                </div>

                <div class="swiper-slide">
                    <div class="featured-card">
                        <div class="featured-image" style="background-image: url('https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=600&h=300&fit=crop')"></div>
                        <div class="featured-content">
                            <div class="featured-meta">
                                <span class="pill pill-featured">Featured</span>
                                <span class="pill">Contest</span>
                            </div>
                            <h3 class="featured-title">Algorithmic Mastery Championship</h3>
                            <p class="featured-desc">Elite programming contest with complex algorithmic challenges and data structures.</p>
                            <div class="featured-details">
                                <span class="detail-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" stroke-width="1.5"/></svg>
                                    March 22, 2025
                                </span>
                                <span class="detail-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" stroke-width="1.5"/></svg>
                                    University Campus
                                </span>
                            </div>
                            <a href="#" class="btn-primary">Join Contest</a>
                        </div>
                    </div>
                </div>

                <div class="swiper-slide">
                    <div class="featured-card">
                        <div class="featured-image" style="background-image: url('https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=300&fit=crop')"></div>
                        <div class="featured-content">
                            <div class="featured-meta">
                                <span class="pill pill-featured">Featured</span>
                                <span class="pill">Hackathon</span>
                            </div>
                            <h3 class="featured-title">Sustainable Tech Challenge</h3>
                            <p class="featured-desc">Build solutions for climate change and environmental sustainability.</p>
                            <div class="featured-details">
                                <span class="detail-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" stroke-width="1.5"/></svg>
                                    April 5-7, 2025
                                </span>
                                <span class="detail-item">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="16" height="16"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" stroke-width="1.5"/></svg>
                                    Hybrid Event
                                </span>
                            </div>
                            <a href="#" class="btn-primary">Learn More</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="swiper-pagination" aria-label="Featured slides pagination"></div>
            <div class="swiper-button-next" aria-label="Next slide"></div>
            <div class="swiper-button-prev" aria-label="Previous slide"></div>
        </div>
    </section>

    <!-- Local Events Section -->
    <section class="events-category">
        <div class="section-header">
            <h2 class="section-title">🎯 Ticketed Events</h2>
            <p class="section-subtitle">Events hosted and managed by our community moderators</p>
        </div>

        <div class="events-grid">
            <article class="event-card local-event">
                <div class="cover" style="background-image: url('https://images.unsplash.com/photo-1531482615713-2afd69097998?w=400&h=250&fit=crop')"></div>
                <div class="card-body">
                    <div class="meta">
                        <span class="pill pill-open">Open</span>
                        <span class="pill">Hackathon</span>
                        <span class="pill pill-local">Local Event</span>
                    </div>
                    <h3 class="card-title"><a href="#">AI Systems Sprint</a></h3>
                    <p class="card-desc">48-hour build focused on agentic workflows, code generation, and developer tooling with mentorship available.</p>
                    <ul class="details">
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Fri, Mar 15 • 6:00 PM</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Tech Hub Downtown</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 11V7a4 4 0 0 0-8 0v4H6a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-2z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>$25 Registration Fee</span>
                        </li>
                    </ul>
                    <div class="progress">
                        <div class="bar" style="--pct:42%"></div>
                        <span class="progress-label">84/200 seats</span>
                    </div>
                    <div class="tags">
                        <span class="tag">AI</span>
                        <span class="tag">Team</span>
                        <span class="tag">Beginner-Friendly</span>
                        <span class="tag">Mentorship</span>
                    </div>
                    <div class="card-actions">
                        <a class="btn-primary" href="#">Buy Ticket</a>
                        <a class="btn-ghost" href="#">Details</a>
                    </div>
                </div>
            </article>

            <article class="event-card local-event">
                <div class="cover" style="background-image: url('https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=250&fit=crop')"></div>
                <div class="card-body">
                    <div class="meta">
                        <span class="pill pill-open">Open</span>
                        <span class="pill">Programming Contest</span>
                        <span class="pill pill-local">Local Event</span>
                    </div>
                    <h3 class="card-title"><a href="#">Data Structures Duel</a></h3>
                    <p class="card-desc">90-minute ICPC-style contest covering trees, graphs, and dynamic programming with prizes.</p>
                    <ul class="details">
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Sat, Mar 18 • 9:00 AM</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>University Hall B</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 11V7a4 4 0 0 0-8 0v4H6a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-2z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Free Entry</span>
                        </li>
                    </ul>
                    <div class="progress">
                        <div class="bar" style="--pct:70%"></div>
                        <span class="progress-label">140/200 seats</span>
                    </div>
                    <div class="tags">
                        <span class="tag">ICPC Style</span>
                        <span class="tag">C++</span>
                        <span class="tag">DP</span>
                        <span class="tag">Prizes</span>
                    </div>
                    <div class="card-actions">
                        <a class="btn-primary" href="#">Register Free</a>
                        <a class="btn-ghost" href="#">Details</a>
                    </div>
                </div>
            </article>

            <article class="event-card local-event">
                <div class="cover" style="background-image: url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=400&h=250&fit=crop')"></div>
                <div class="card-body">
                    <div class="meta">
                        <span class="pill pill-closed">Closed</span>
                        <span class="pill">Hackathon</span>
                        <span class="pill pill-local">Local Event</span>
                    </div>
                    <h3 class="card-title"><a href="#">Security CTF Night</a></h3>
                    <p class="card-desc">CTF tracks in web security, binary exploitation, cryptography, and digital forensics challenges.</p>
                    <ul class="details">
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Past • Feb 28</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Online Platform</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 11V7a4 4 0 0 0-8 0v4H6a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-2z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>$15 Entry Fee</span>
                        </li>
                    </ul>
                    <div class="progress">
                        <div class="bar" style="--pct:100%"></div>
                        <span class="progress-label">200/200 seats</span>
                    </div>
                    <div class="tags">
                        <span class="tag">CTF</span>
                        <span class="tag">Security</span>
                        <span class="tag">Web Exploitation</span>
                    </div>
                    <div class="card-actions">
                        <a class="btn-ghost" href="#">View Results</a>
                    </div>
                </div>
            </article>
        </div>
    </section>

    <!-- External Events Section -->
    <section class="events-category">
        <div class="section-header">
            <h2 class="section-title">🌍 External Competitions</h2>
            <p class="section-subtitle">Major international contests and hackathons — external registration required</p>
        </div>

        <div class="events-grid">
            <article class="event-card external-event">
                <div class="cover" style="background-image: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=250&fit=crop')"></div>
                <div class="card-body">
                    <div class="meta">
                        <span class="pill pill-open">Open</span>
                        <span class="pill">Hackathon</span>
                        <span class="pill pill-external">Global Event</span>
                    </div>
                    <h3 class="card-title"><a href="#">NASA Space Apps Challenge 2025</a></h3>
                    <p class="card-desc">Annual global hackathon where teams use NASA's open data to solve real-world problems on Earth and in space.</p>
                    <ul class="details">
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Oct 4-6, 2025</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Global • 400+ Locations</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>NASA Official Event</span>
                        </li>
                    </ul>
                    <div class="progress">
                        <div class="bar" style="--pct:25%"></div>
                        <span class="progress-label">Registration Opens Soon</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Space</span>
                        <span class="tag">NASA</span>
                        <span class="tag">Open Data</span>
                        <span class="tag">Global</span>
                    </div>
                    <div class="card-actions">
                        <a class="btn-primary" href="https://spaceappschallenge.org" target="_blank" rel="noopener">Register on NASA Site</a>
                        <a class="btn-ghost" href="#">Learn More</a>
                    </div>
                </div>
            </article>

            <article class="event-card external-event">
                <div class="cover" style="background-image: url('https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400&h=250&fit=crop')"></div>
                <div class="card-body">
                    <div class="meta">
                        <span class="pill pill-open">Open</span>
                        <span class="pill">Programming Contest</span>
                        <span class="pill pill-external">Global Event</span>
                    </div>
                    <h3 class="card-title"><a href="#">ICPC World Finals 2025</a></h3>
                    <p class="card-desc">The most prestigious programming contest in the world. Teams compete in algorithmic problem solving.</p>
                    <ul class="details">
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>April 15-20, 2025</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Luxor, Egypt</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Qualification Required</span>
                        </li>
                    </ul>
                    <div class="progress">
                        <div class="bar" style="--pct:80%"></div>
                        <span class="progress-label">Regional Qualifiers Ongoing</span>
                    </div>
                    <div class="tags">
                        <span class="tag">ICPC</span>
                        <span class="tag">World Finals</span>
                        <span class="tag">Algorithms</span>
                        <span class="tag">Prestigious</span>
                    </div>
                    <div class="card-actions">
                        <a class="btn-primary" href="https://icpc.global" target="_blank" rel="noopener">Visit ICPC Site</a>
                        <a class="btn-ghost" href="#">View Details</a>
                    </div>
                </div>
            </article>

            <article class="event-card external-event">
                <div class="cover" style="background-image: url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400&h=250&fit=crop')"></div>
                <div class="card-body">
                    <div class="meta">
                        <span class="pill pill-open">Open</span>
                        <span class="pill">Hackathon</span>
                        <span class="pill pill-external">Global Event</span>
                    </div>
                    <h3 class="card-title"><a href="#">Google Code Jam 2025</a></h3>
                    <p class="card-desc">Google's longest running global programming competition with multiple rounds and cash prizes.</p>
                    <ul class="details">
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 11h10M7 15h6M16 3v4M8 3v4M5 7h14v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>March – August 2025</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2a7 7 0 0 1 7 7c0 5-7 13-7 13S5 14 5 9a7 7 0 0 1 7-7z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Online Global</span>
                        </li>
                        <li>
                            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                            <span>Google Official</span>
                        </li>
                    </ul>
                    <div class="progress">
                        <div class="bar" style="--pct:35%"></div>
                        <span class="progress-label">Qualification Round Coming</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Google</span>
                        <span class="tag">Programming</span>
                        <span class="tag">Cash Prizes</span>
                        <span class="tag">Competitive</span>
                    </div>
                    <div class="card-actions">
                        <a class="btn-primary" href="https://codingcompetitions.withgoogle.com" target="_blank" rel="noopener">Join on Google</a>
                        <a class="btn-ghost" href="#">More Info</a>
                    </div>
                </div>
            </article>

           
        </div>
    </section>

   
</main>

@section Scripts{
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script>
        // Swiper init (Featured)
        const featuredSwiper = new Swiper('.featured-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: true,
            pagination: { el: '.swiper-pagination', clickable: true },
            navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
            breakpoints: {
                768: { slidesPerView: 2 },
                1200: { slidesPerView: 3 }
            }
        });

        // Progressive enhancement: if no cards in listing, show empty state
        (function(){
            const listing = document.querySelector('.events-listing .events-grid');
            const empty = document.querySelector('.events-listing .empty-state');
            if (listing && listing.children.length === 0 && empty) {
                empty.hidden = false;
            }
        })();

        // Ensure CSS progress bars respect --pct variable even if stylesheet hasn't loaded yet
        (function(){
            document.querySelectorAll('.progress .bar').forEach(bar => {
                const pct = bar.getAttribute('style')?.match(/--pct:\s*([^;]+)/)?.[1] || '0%';
                bar.style.width = pct;
                bar.setAttribute('aria-valuenow', parseInt(pct));
                bar.setAttribute('aria-valuemin', '0');
                bar.setAttribute('aria-valuemax', '100');
                bar.setAttribute('role', 'progressbar');
            });
        })();
    </script>
}
